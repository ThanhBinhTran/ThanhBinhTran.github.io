<!DOCTYPE html>
<html>
<head>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@papaparse/papaparse@5"></script>
</head>
<body>
<h4> version 359</h4>
<input type="text" id="searchInput" placeholder="Search...">
<button id="searchButton">Search</button>

<table id="myTable">
    <thead></thead>
    <tbody></tbody>
</table>

<script>
    function generateTableHeaders(headers) {
        var table = document.getElementById("myTable");
        var thead = table.createTHead();
        var row = thead.insertRow();
        for (var i = 0; i < headers.length; i++) {
            var th = document.createElement("th");
            th.innerHTML = headers[i];
            row.appendChild(th);
        }
    }

    function insertRow(data) {
        var table = document.getElementById("myTable");
        var row = table.insertRow(-1);
        for (var i = 0; i < data.length; i++) {
            var cell = row.insertCell(-1);
            cell.innerHTML = data[i];
        }
    }

    function CSVToHTMLTable(data) {
        var csvData = Papa.parse(data).data;
        generateTableHeaders(csvData[0]);
        for (var i = 1; i < csvData.length; i++) {
            insertRow(csvData[i]);
        }
    }

    $("#searchButton").click(function() {
        var searchValue = $("#searchInput").val();
        $.ajax({
            type: "GET",
            url: "midterm.csv",
            success: function(data) {
                CSVToHTMLTable(data);
                // add code here to filter the table based on the searchValue
            }
        });
    });
</script>

</body>
</html>